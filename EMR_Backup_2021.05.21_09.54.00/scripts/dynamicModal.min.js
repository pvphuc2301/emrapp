const ModalSize = { Default: "modal-sm", Medium: "modal-md", Large: "modal-lg", XLarge: "modal-xl" }; class DynamicModal { constructor(t = "") { this.showDynamicModal = ((a = "", i, r, d = ModalSize, s, c = !0, u = (() => { }), m = (() => { }), p = !1) => { $(".loadingContainer").show(), $("#placeHolderId" + t).val(s), $("#placeHolderId" + t).attr("closeModal", c), l = "", o = !1, n = p, $("#DynamicModal" + t).unbind().on("hidden.bs.modal", () => { $("#ModelContainer" + t).html("") }), $("#DynamicModal" + t + " > .modal-dialog").addClass(d); var y = "?"; $.each(r, (t, a) => { y += t + "=" + a + "&" }), $("#ModelTitle" + t).text(a), $.ajax({ type: "GET", url: i + y, datatype: "json", success: a => { var l = !1, o = !1, n = !1; if (null != a.StatusCode && "" != a.StatusDescription) { 500 == a.StatusCode ? l = !0 : 401 == a.StatusCode ? o = !0 : 203 == a.StatusCode ? n = !0 : 302 == a.StatusCode && window.location.replace(a.StatusDescription); var i = DynamicAlert.init(); l && i.ShowAlert(a.StatusDescription, AlertType.Error), o && location.reload() } 0 == l && 0 == n && (null != a.HTML && "" != a.HTML ? $("#ModelContainer" + t).html(a.HTML) : $("#ModelContainer" + t).html(a), e(t, m), $("#DynamicModal" + t).modal("show")), $(".loadingContainer").hide(), 0 == l && "function" == typeof u && u() }, error: function () { $(".loadingContainer").hide(), DynamicAlert.init().ShowAlert("Internal Server Error", AlertType.Error) } }) }), this.Id = t; const a = t => { setTimeout(() => { var a = $("#" + $("#placeHolderId" + t).val()).css("background-color"); $("#" + $("#placeHolderId" + t).val()).css("background-color", "#adb5bd4d"), null == a || null == a || "" == a ? $("#" + $("#placeHolderId" + t).val()).animate({ backgroundColor: "" }, 4e3) : $("#" + $("#placeHolderId" + t).val()).animate({ backgroundColor: a }, 4e3) }, 100) }, e = function (t = "", e = null) { $("#ModelContainer" + t + " form").each(function () { jQuery.validator.unobtrusive.parse(), null == $(this).attr("id") && $(this).attr("id", "form1"); var i = $(this).attr("id"); $("#" + i).append('<div class="modal-footer"></div>'), $("#" + i + " .modal-footer").append($("#ModelContainer" + t + " .btn-dynamicmodal"), '<button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>'), l = $("#" + i).serialize(), $("#DynamicModal" + t).on("hide.bs.modal", function (t) { if (l != $("#" + i).serialize() && 0 == o && 1 != confirm("There is some unsaved changes, Are you sure do you want to leave?")) return !1 }), jQuery.validator.unobtrusive.parse("#" + $(this).attr("id")), $(this).unbind().submit(function (r) { if (r.preventDefault(), !$(this).valid()) return !1; var d = $(this).attr("action"), s = $(this).attr("method"), c = $(this).serialize(); $(".loadingContainer").show(), $.ajax({ url: d, type: s, data: c, success: function (r) { var d = !1, s = !1; if (null != r.StatusCode && "" != r.StatusDescription) { if (500 == r.StatusCode ? d = !0 : 401 == r.StatusCode ? s = !0 : 302 == r.StatusCode && window.location.replace(r.StatusDescription), s) return alert(r.StatusDescription), void location.reload(); var c = DynamicAlert.init(); d ? c.ShowAlert(r.StatusDescription, AlertType.Error) : c.ShowAlert(r.StatusDescription, AlertType.Success), "" != $("#placeHolderId" + t).val() && null != $("#placeHolderId" + t).val() && null != r.HTML && "" != r.HTML && ($("#" + $("#placeHolderId" + t).val()).html(r.HTML), n && a(t)) } else "" != $("#placeHolderId" + t).val() && null != $("#placeHolderId" + t).val() && (null != r.HTML && "" != r.HTML ? $("#" + $("#placeHolderId" + t).val()).html(r.HTML) : $("#" + $("#placeHolderId" + t).val()).html(r), n && a(t)); "function" == typeof e && 0 == d && e(), o = !0, "true" == $("#placeHolderId" + t).attr("closeModal") && 0 == d ? ($("#DynamicModal" + t).modal("hide"), $("#ModelContainer" + t).html("")) : (l = $("#" + i).serialize(), o = !1), $(".loadingContainer").hide() }, error: function (t, a, e) { alert("Error occurred!"), $(".loadingContainer").hide(), l = "" } }) }) }), 0 == $("#ModelContainer" + t + "  form").length && (0 == $("#ModelContainer" + t + " .btn-dynamicmodal").length ? $("#DynamicModal " + t + " #ModelContainer" + t).append('<div class="modal-footer"><button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button></div>') : ($("#DynamicModal " + t + " #ModelContainer" + t).append('<div class="modal-footer"></div>'), $("#DynamicModal " + t + " #ModelContainer" + t + " .modal-footer").append($("#ModelContainer" + t + " .btn-dynamicmodal"), '<button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>'))) }; var l = "", o = !1, n = !1; this.hideModal = (() => { $("#DynamicModal" + this.Id).modal("hide") }) } static init(t = "") { return $("body").append('<div class="modal-dark modal fade" id="DynamicModal' + t + '" tabindex="-1" role="dialog" aria-labelledby="ModelTitle' + t + '" aria-hidden="true"><input type = "hidden" id = "placeHolderId' + t + '" /><div class="modal-dialog" role="document"><div class="modal-content" style="border: solid 1px;"><div class="modal-header text-center"><span class="modal-title h3 text-center" id="ModelTitle' + t + '"> </span><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button></div><div class="modal-body" id="ModelContainer' + t + '"></div></div></div></div>'), new DynamicModal(t) } } const AlertType = { Error: "alert-danger", Success: "alert-success", Info: "alert-info" }; var DynamicAlertCount = 0; class DynamicAlert { constructor() { this.ShowAlert = ((e, l = AlertType) => { a(DynamicAlertCount += 1), $("#DynamicAlert" + DynamicAlertCount).removeClass("alert-danger").removeClass("alert-success").removeClass("alert-info"), $("#DynamicAlert" + DynamicAlertCount).addClass(l), $("#DynamicAlertMessage" + DynamicAlertCount).html(e), t(DynamicAlertCount) }), this.ShowAlertAjax = (t => { a(DynamicAlertCount += 1); var e = !1, l = !1; if ($("#DynamicAlert" + DynamicAlertCount).removeClass("alert-danger").removeClass("alert-success").removeClass("alert-info"), null != t.StatusCode && "" != t.StatusDescription) return $("#DynamicAlertMessage" + DynamicAlertCount).html(t.StatusDescription), 500 == t.StatusCode ? (e = !0, $("#DynamicAlert" + DynamicAlertCount).addClass(AlertType.Error)) : 401 == t.StatusCode ? (l = !0, $("#DynamicAlert" + DynamicAlertCount).addClass(AlertType.Error), alert(t.StatusDescription)) : 302 == t.StatusCode ? window.location.replace(t.StatusDescription) : $("#DynamicAlert" + DynamicAlertCount).addClass(AlertType.Success), l && location.reload(), !e }); const t = t => { setTimeout(function () { $("#DynamicAlert" + t).alert("close") }, 8e3) }, a = t => { $("div#DynamicAlerts").append('<div class="col-12 alert alert-dismissible"  style="z-index:100000" Id="DynamicAlert' + t + '"  role="alert" ><button class="close"  style="width:10px; height:10px;color:black;  padding-bottom: 19px;" type="button" data-dismiss="alert" aria-hidden="true"><span class="">x</span> </button> <span id="DynamicAlertMessage' + t + '"></span></div>') } } static init() { return 0 == $("#DynamicAlerts").length && $("body").prepend('<div id="DynamicAlerts" class="container-fluid" style="position: -webkit-sticky; position: fixed !important; top: 0px; z-index: 100000000000; min-width:100%;"></div>'), new DynamicAlert } }